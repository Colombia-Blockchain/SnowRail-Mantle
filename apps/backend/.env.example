# ============================================
# SnowRail LEGO Architecture Environment Configuration
# ============================================
# Copy this file to .env and configure for your environment
#
# CRITICAL: Never commit .env files with real credentials to git!

# ============================================
# SERVER CONFIGURATION
# ============================================
PORT=3001
HOST=0.0.0.0
NODE_ENV=development
LOG_LEVEL=info

# ============================================
# NETWORK CONFIGURATION
# ============================================
# Supported networks: mantle-sepolia, mantle
NETWORK_NAME=Mantle Sepolia
CHAIN_ID=5003
RPC_URL=https://rpc.sepolia.mantle.xyz

# ============================================
# PROTOCOL SELECTION (LEGO Architecture)
# ============================================
# Protocol mode determines V1 vs V2 behavior
# Options: legacy | x402
# - legacy: Original V1 behavior, all new features OFF
# - x402: Enable V2 protocol extensions
SNOWRAIL_PROTOCOL=legacy

# ============================================
# V2 FEATURE FLAGS
# ============================================
# Only active when SNOWRAIL_PROTOCOL=x402
# All default to false for safety

# AP2 (Agent Payments Protocol v2)
AP2_ENABLED=false
# Require AP2 mandate for all intents (only if AP2 enabled)
REQUIRE_AP2_MANDATE=false

# X402 (HTTP 402 Payment Required) extensions
X402_ENABLED=false

# OPA (Open Policy Agent) integration
OPA_ENABLED=false
# Enforce OPA policy checks on all operations (only if OPA enabled)
ENFORCE_OPA_POLICIES=false

# Sentinel (Monitoring/Alerting/Reputation)
SENTINEL_ENABLED=false

# EigenLayer AVS integration
EIGEN_ENABLED=false

# ============================================
# WALLET & CONTRACTS
# ============================================
# WARNING: Never commit real private keys!
PRIVATE_KEY=your_private_key_here
CLIENT_PRIVATE_KEY=your_client_private_key_here

# Payment recipient address
PAY_TO_ADDRESS=0x0000000000000000000000000000000000000000

# Core contracts (deployed on Mantle Sepolia)
SETTLEMENT_CONTRACT_ADDRESS=0xae6E14caD8D4f43947401fce0E4717b8D17b4382
MIXER_CONTRACT_ADDRESS=0x9C7dC7C8D6156441D5D5eCF43B33F960331c4600

# ============================================
# MANTLE TOKEN ADDRESSES
# ============================================
# Wrapped Mantle Token
WMNT_ADDRESS=0x78c1b0C915c4FAA5FffA6CAbf0219DA63d7f4cb8
# Mantle ETH
METH_ADDRESS=0xcDA86A272531e8640cD7F1a92c01839911B90bb0
# USDY (Ondo RWA token)
USDY_ADDRESS=0x5bE26527e817998A7206475496fDE1E68957c5A6

# ============================================
# PROVIDER CONFIGURATION (LEGO Architecture)
# ============================================
# Each provider can be swapped between real and mock implementations

# RWA Provider (Track 1: RWA/RealFi)
# Options: usdy | meth | mock
RWA_PROVIDER=mock

# Oracle Provider (Track 2: AI & Oracles)
# Options: pyth | mock
ORACLE_PROVIDER=mock

# Swap Provider (Track 3: DeFi & Composability)
# Options: merchant-moe | mock
SWAP_PROVIDER=mock

# Verify Provider (Track 4: ZK & Privacy)
# Options: worldcoin | mock
VERIFY_PROVIDER=mock

# ZK Provider (Track 4: ZK & Privacy)
# Options: noir | mock
ZK_PROVIDER=mock

# ============================================
# PYTH ORACLE (AI & Oracles Track)
# ============================================
# Pyth contract address on Mantle Sepolia
PYTH_ADDRESS=0xA2aa501b19aff244D90cc15a4Cf739D2725B5729
# Pyth Hermes API endpoint
PYTH_HERMES_ENDPOINT=https://hermes.pyth.network

# ============================================
# MERCHANT MOE DEX (DeFi Track)
# ============================================
# Router contract
MERCHANT_MOE_ROUTER=0xeaEE7EE68874218c3558b40063c42B82D3E7232a
# Factory contract
MERCHANT_MOE_FACTORY=0xa6630671775c4EA2743840F9A5016dCf2A104054
# Liquidity Book Router
MERCHANT_MOE_LB_ROUTER=0x013e138EF6008ae5FDFDE29700e3f2Bc61d21E3a

# ============================================
# X402 FACILITATOR
# ============================================
# x402 payment facilitator endpoint
FACILITATOR_URL=http://localhost:4000/facilitator
FACILITATOR_PORT=3002
X402_FACILITATOR_URL=http://localhost:4000/facilitator
FACILITATOR_API_KEY=

# Settlement mode: direct | facilitator
SETTLEMENT_MODE=facilitator
# Allow demo token for testing
X402_ALLOW_DEMO_TOKEN=true

# ============================================
# CORS CONFIGURATION
# ============================================
# Comma-separated list of allowed origins
CORS_ALLOWED_ORIGINS=http://localhost:3000,http://localhost:3001,https://app.snowrail.xyz,https://sandbox.snowrail.xyz

# ============================================
# AUTHENTICATION
# ============================================
# JWT secret for signing tokens (generate a strong random value!)
JWT_SECRET=your_jwt_secret_here_generate_a_strong_random_value
JWT_EXPIRES_IN=7d

# ============================================
# DATABASE
# ============================================
# PostgreSQL connection string
DATABASE_URL=postgresql://postgres:postgres@localhost:5432/snowrail

# ============================================
# AI/LLM CONFIGURATION
# ============================================
# AI provider: openai | eigenai
AI_PROVIDER=openai
AI_MODEL=gpt-4o-mini
AI_TEMPERATURE=0.7
AI_MAX_TOKENS=500

# OpenAI API key
OPENAI_API_KEY=sk-your_openai_api_key_here

# EigenAI configuration (alternative AI provider)
EIGENAI_BASE_URL=https://eigenai.eigencloud.xyz/v1
EIGENAI_API_KEY=your_eigenai_api_key_here

# ============================================
# SERVICES
# ============================================
SERVICE_URL=http://localhost:4000/process
AGENT_URL=http://localhost:3000
EXPLORER_URL=https://sepolia.mantlescan.xyz

# ============================================
# RAIL CONFIGURATION (Banking Rails)
# ============================================
RAIL_API_BASE_URL=https://sandbox.layer2financial.com/api
RAIL_AUTH_URL=https://auth.layer2financial.com/oauth2/ausbdqlx69rH6OjWd696/v1/token
RAIL_API_KEY=your_rail_api_key_here
RAIL_CLIENT_ID=your_rail_client_id_here
RAIL_CLIENT_SECRET=your_rail_client_secret_here
RAIL_SIGNING_KEY=your_rail_signing_key_here
RAIL_SOURCE_ACCOUNT_ID=your_source_account_id_here
RAIL_COUNTERPARTY_ID=your_counterparty_id_here

# ============================================
# SECURITY SETTINGS
# ============================================
# Rate limiting
RATE_LIMIT_WINDOW_MS=60000
RATE_LIMIT_MAX_REQUESTS=100

# Request logging
ENABLE_REQUEST_LOGS=true

# Blacklisted addresses (comma-separated)
# BLACKLISTED_ADDRESSES=0xbad...

# ============================================
# MISCELLANEOUS
# ============================================
# ThirdWeb integration
THIRDWEB_SECRET_KEY=your_thirdweb_secret_key_here

# Merchant API
MERCHANT_API_ENABLED=true

# Asset configuration
ASSET_ADDRESS=0x5425890298aed601595a70AB815c96711a31Bc65
ASSET_NAME=USDC

# ============================================
# TESTING / DEVELOPMENT ONLY
# ============================================
# WARNING: These should be false/empty in production!

# Skip signature verification in tests
SKIP_SIGNATURE_VERIFICATION=false

# Use mock providers for all services
USE_ALL_MOCKS=false

# Enable debug endpoints
DEBUG_ENDPOINTS_ENABLED=false
